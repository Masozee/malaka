-- Static Reports seed data
INSERT INTO static_reports (report_code, report_name, report_category, report_type, description, template_path, output_format, parameters, data_source, sql_query, schedule_type, schedule_config, email_recipients, auto_send, is_public, created_by, generation_count) VALUES
('SRP001', 'Laporan Penjualan Bulanan', 'Penjualan', 'FINANCIAL', 'Laporan penjualan bulanan untuk manajemen dan stakeholder', '/templates/sales/monthly_sales_report.html', 'PDF', '{"month": "integer", "year": "integer"}', 'sales_orders', 'SELECT DATE_PART(''day'', order_date) as day, SUM(total_amount) as daily_sales FROM sales_orders WHERE DATE_PART(''month'', order_date) = $1 AND DATE_PART(''year'', order_date) = $2 GROUP BY DATE_PART(''day'', order_date) ORDER BY day', 'MONTHLY', '{"day_of_month": 1, "hour": 8, "minute": 0}', '["manager@malaka.co.id", "director@malaka.co.id"]', true, true, (SELECT id FROM users WHERE email = 'manager@malaka.co.id' LIMIT 1), 8),
('SRP002', 'Inventory Stock Report', 'Inventory', 'OPERATIONAL', 'Laporan stok harian untuk monitoring persediaan', '/templates/inventory/daily_stock_report.html', 'EXCEL', '{"warehouse_id": "uuid"}', 'stock_balances', 'SELECT a.name as article_name, sb.quantity, sb.unit_cost, (sb.quantity * sb.unit_cost) as total_value FROM stock_balances sb JOIN articles a ON sb.article_id = a.id WHERE sb.warehouse_id = $1 AND sb.quantity > 0 ORDER BY total_value DESC', 'DAILY', '{"hour": 7, "minute": 30}', '["warehouse@malaka.co.id", "supervisor@malaka.co.id"]', true, false, (SELECT id FROM users WHERE email = 'supervisor@malaka.co.id' LIMIT 1), 45),
('SRP003', 'Customer Invoice Statement', 'Finance', 'CUSTOMER', 'Statement invoice pelanggan untuk follow-up pembayaran', '/templates/finance/customer_statement.html', 'PDF', '{"customer_id": "uuid", "month": "integer", "year": "integer"}', 'sales_orders', 'SELECT order_number, order_date, total_amount, payment_status FROM sales_orders WHERE customer_id = $1 AND DATE_PART(''month'', order_date) = $2 AND DATE_PART(''year'', order_date) = $3 ORDER BY order_date', 'WEEKLY', '{"day_of_week": 1, "hour": 9, "minute": 0}', '["finance@malaka.co.id"]', false, false, (SELECT id FROM users WHERE email = 'cashier@malaka.co.id' LIMIT 1), 120),
('SRP004', 'Employee Payroll Slip', 'HR', 'PAYROLL', 'Slip gaji karyawan bulanan', '/templates/hr/payroll_slip.html', 'PDF', '{"employee_id": "uuid", "month": "integer", "year": "integer"}', 'salary_calculation', 'SELECT e.employee_name, e.employee_code, sc.basic_salary, sc.allowances, sc.total_deductions, sc.net_salary FROM salary_calculation sc JOIN employees e ON sc.employee_id = e.id WHERE sc.employee_id = $1 AND sc.period_month = $2 AND sc.period_year = $3', 'MONTHLY', '{"day_of_month": 25, "hour": 16, "minute": 0}', '[]', false, false, (SELECT id FROM users WHERE email = 'staff@malaka.co.id' LIMIT 1), 180),
('SRP005', 'Supplier Payment Report', 'Procurement', 'FINANCIAL', 'Laporan pembayaran supplier untuk tracking hutang', '/templates/procurement/supplier_payment.html', 'PDF', '{"supplier_id": "uuid", "month": "integer", "year": "integer"}', 'purchase_vouchers', 'SELECT voucher_number, voucher_date, total_amount, paid_amount, remaining_amount, status FROM purchase_vouchers WHERE supplier_id = $1 AND DATE_PART(''month'', voucher_date) = $2 AND DATE_PART(''year'', voucher_date) = $3 ORDER BY due_date', 'WEEKLY', '{"day_of_week": 5, "hour": 14, "minute": 0}', '["procurement@malaka.co.id", "finance@malaka.co.id"]', true, false, (SELECT id FROM users WHERE email = 'manager@malaka.co.id' LIMIT 1), 32),
('SRP006', 'Daily Cash Flow Report', 'Finance', 'FINANCIAL', 'Laporan arus kas harian untuk monitoring likuiditas', '/templates/finance/daily_cashflow.html', 'EXCEL', '{"report_date": "date"}', 'cash_receipts', 'SELECT ''RECEIPT'' as type, receipt_type as category, SUM(amount) as total FROM cash_receipts WHERE receipt_date = $1 GROUP BY receipt_type UNION SELECT ''DISBURSEMENT'' as type, disbursement_type as category, -SUM(amount) as total FROM cash_disbursements WHERE disbursement_date = $1 GROUP BY disbursement_type', 'DAILY', '{"hour": 17, "minute": 30}', '["finance@malaka.co.id", "manager@malaka.co.id"]', true, true, (SELECT id FROM users WHERE email = 'cashier@malaka.co.id' LIMIT 1), 90),
('SRP007', 'Sales Performance by SPG', 'Sales', 'PERFORMANCE', 'Laporan kinerja SPG berdasarkan pencapaian target', '/templates/sales/spg_performance.html', 'PDF', '{"month": "integer", "year": "integer"}', 'spb_spg', 'SELECT e.employee_name, ss.store_name, spb.target_amount, spb.actual_sales, spb.achievement_percentage, spb.total_commission FROM spb_spg spb JOIN employees e ON spb.employee_id = e.id JOIN spg_stores ss ON spb.employee_id = ss.employee_id WHERE spb.period_month = $1 AND spb.period_year = $2 ORDER BY spb.achievement_percentage DESC', 'MONTHLY', '{"day_of_month": 3, "hour": 10, "minute": 0}', '["sales@malaka.co.id", "hr@malaka.co.id"]', true, true, (SELECT id FROM users WHERE email = 'supervisor@malaka.co.id' LIMIT 1), 12),
('SRP008', 'Material Usage Report', 'Production', 'OPERATIONAL', 'Laporan penggunaan material produksi', '/templates/production/material_usage.html', 'EXCEL', '{"month": "integer", "year": "integer"}', 'material_sales', 'SELECT m.material_name, SUM(msi.quantity) as used_qty, AVG(msi.unit_price) as avg_price, SUM(msi.total_amount) as total_cost FROM material_sales ms JOIN material_sale_items msi ON ms.id = msi.sale_id JOIN materials m ON msi.material_id = m.id WHERE DATE_PART(''month'', ms.sale_date) = $1 AND DATE_PART(''year'', ms.sale_date) = $2 GROUP BY m.material_name ORDER BY total_cost DESC', 'MONTHLY', '{"day_of_month": 2, "hour": 8, "minute": 30}', '["production@malaka.co.id"]', true, false, (SELECT id FROM users WHERE email = 'staff@malaka.co.id' LIMIT 1), 24),
('SRP009', 'Shipping Cost Analysis', 'Logistics', 'OPERATIONAL', 'Analisis biaya pengiriman per kurir dan rute', '/templates/logistics/shipping_analysis.html', 'PDF', '{"month": "integer", "year": "integer"}', 'shipping_invoices', 'SELECT c.name as courier_name, si.destination, COUNT(*) as shipment_count, SUM(si.total_amount) as total_cost, AVG(si.total_amount) as avg_cost FROM shipping_invoices si JOIN couriers c ON si.courier_id = c.id WHERE DATE_PART(''month'', si.invoice_date) = $1 AND DATE_PART(''year'', si.invoice_date) = $2 GROUP BY c.name, si.destination ORDER BY total_cost DESC', 'MONTHLY', '{"day_of_month": 5, "hour": 11, "minute": 0}', '["logistics@malaka.co.id", "finance@malaka.co.id"]', true, true, (SELECT id FROM users WHERE email = 'manager@malaka.co.id' LIMIT 1), 18),
('SRP010', 'Attendance Summary Report', 'HR', 'ATTENDANCE', 'Ringkasan absensi karyawan bulanan', '/templates/hr/attendance_summary.html', 'EXCEL', '{"month": "integer", "year": "integer"}', 'attendance_calculation', 'SELECT e.employee_name, e.department, ac.working_days, ac.present_days, ac.absent_days, ac.late_days, ac.overtime_hours, ac.attendance_percentage FROM attendance_calculation ac JOIN employees e ON ac.employee_id = e.id WHERE ac.period_month = $1 AND ac.period_year = $2 ORDER BY e.department, e.employee_name', 'MONTHLY', '{"day_of_month": 1, "hour": 9, "minute": 30}', '["hr@malaka.co.id", "manager@malaka.co.id"]', true, true, (SELECT id FROM users WHERE email = 'staff@malaka.co.id' LIMIT 1), 15);